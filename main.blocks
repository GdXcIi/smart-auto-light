<xml xmlns="https://developers.google.com/blockly/xml"><variables><variable id="TUeO5Co9SI)f`r9e@y|/">IR_PIN</variable><variable id="}/dh6*]fa!Jv`ZWRztX=">LUMINOSITY_THRESHOLD</variable><variable id="bC|-H}b`*z?g4Z66pC!;">PIR_PIN</variable></variables><comment id="@guUqLL7H^U(?.e;=~lo" x="795" y="770" w="180" h="120">
=== MAIN LOGIC ===
</comment><block type="pxt-on-start" id="o$O678CM#u}LQK*jtXQ}" x="0" y="0"><statement name="HANDLER"><block type="variables_set" id="sBai]hc(B^+G_oMa$|{j"><field name="VAR" id="}/dh6*]fa!Jv`ZWRztX=">LUMINOSITY_THRESHOLD</field><comment pinned="false" h="80" w="160">=== CONFIG ===</comment><value name="VALUE"><shadow type="math_number" id="}qh,+pxECj7@~;|bW2Kb"><field name="NUM">50</field></shadow></value><next><block type="variables_set" id="/~M36S!J:F|mL[k5wi`d"><field name="VAR" id="bC|-H}b`*z?g4Z66pC!;">PIR_PIN</field><value name="VALUE"><shadow type="math_number" id="e9Th#ZVj02d0Z]+)[:4b"><field name="NUM">0</field></shadow><block type="digital_pin" id="^SF31tmR155zOW7}QFz`"><field name="pin">DigitalPin.P0</field></block></value><next><block type="variables_set" id="~[X]dUZd{8:}uhfW#Bq#"><field name="VAR" id="TUeO5Co9SI)f`r9e@y|/">IR_PIN</field><value name="VALUE"><shadow type="math_number" id="wHcLLyql7%!x-dfbCcqm"><field name="NUM">0</field></shadow><block type="digital_pin" id="cumKSEmZd*#4bL?sJeJE"><field name="pin">DigitalPin.P1</field></block></value></block></next></block></next></block></statement></block><block type="device_forever" id="ei!*Wm9^,SlEX`T5]=ci" x="451" y="0"><comment pinned="false" h="80" w="160">Plus propre que de déclarer une fonction anonyme</comment><statement name="HANDLER"><block type="controls_if" id="6pk;z3R]1OC9$*.,S}*9"><mutation elseif="1" else="1"></mutation><comment pinned="false" h="80" w="160">Priorité au bouton A (override les capteurs)
Sinon, vérifier les capteurs</comment><value name="IF0"><shadow type="logic_boolean" id="`B1AgDl6T$!Gw!-AE-$6"><field name="BOOL">TRUE</field></shadow><block type="function_call_output" id="eH)ZW.uaJHeyZo^OGL`V"><mutation name="isButtonAPressed" functionid="y#Jl7z`.k]a#UOE(gCTF"></mutation></block></value><statement name="DO0"><block type="function_call" id="0.xM~(F8e-])#(]{:1Wm"><mutation name="switchOnLEDs" functionid=":JVH=TLMQozJ`6XS%,8?"></mutation></block></statement><value name="IF1"><shadow type="logic_boolean" id="_G~6#?W7[8O*IrQ%A_B`"><field name="BOOL">TRUE</field></shadow><block type="logic_operation" id="#1di@6P5[{ID1v5/t6W4"><field name="OP">AND</field><value name="A"><shadow type="logic_boolean" id="kpG^!KU+7+nleZ4K@IvE"><field name="BOOL">TRUE</field></shadow><block type="logic_operation" id="8pV{O2;o323[qI7}72F+"><field name="OP">AND</field><value name="A"><shadow type="logic_boolean" id="]hQDemLN78dKPB58HV]d"><field name="BOOL">TRUE</field></shadow><block type="function_call_output" id="0O%MeDpi*%?*1a?L]AnN"><mutation name="checkPIR" functionid="s;X?EgAuMz,23$,qy}Ng"></mutation></block></value><value name="B"><shadow type="logic_boolean" id="wj,_syj$bIyqw{i!TQnI"><field name="BOOL">TRUE</field></shadow><block type="function_call_output" id="=ycdb#ao2HtZm(B+lWdH"><mutation name="checkIR" functionid="eNCoB0rWd)xb)b;m(Qx;"></mutation></block></value></block></value><value name="B"><shadow type="logic_boolean" id="law(q/Cp1fK6a(-,-{tc"><field name="BOOL">TRUE</field></shadow><block type="function_call_output" id="Jik[f+91}=UPqnp*_Y`!"><mutation name="checkLum" functionid="!seU.O:+BTqeT|4LZjJ{"></mutation></block></value></block></value><statement name="DO1"><block type="function_call" id="h.!#@5bA=MFAXSIh!i(U"><mutation name="switchOnLEDs" functionid=":JVH=TLMQozJ`6XS%,8?"></mutation></block></statement><statement name="ELSE"><block type="function_call" id="-]`RhbHK6H3Dr0n/ju(S"><mutation name="switchOffLEDs" functionid="sEaCG?+5^B_mI#HP6lDE"></mutation></block></statement><next><block type="typescript_statement" id="yJcy,WR%z~~%=`5xxbYu"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let ledState = isButtonAPressed() || checkPIR() &amp;&amp; checkIR() &amp;&amp; checkLum() ? 1 : 0" numlines="1" declaredvars="ledState"></mutation><next><block type="typescript_statement" id="dx(@w~zA*y1(p7P4~+o$"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="dashboard.send_dashboard(1, ledState, input.lightLevel(), checkPIR() ? 1 : 0, checkIR() ? 1 : 0)" numlines="1"></mutation></block></next></block></next></block></statement></block><block type="function_definition" id="NN[wp+#w`$e*?80!fYie" x="1373" y="0"><mutation name="switchOnLEDs" functionid=":JVH=TLMQozJ`6XS%,8?"></mutation><field name="function_name">switchOnLEDs</field><comment pinned="false" h="80" w="160">=== UTILS ===</comment><statement name="STACK"><block type="device_show_leds" id="gmNs;xU82)v83GA56Bz/"><field name="LEDS">`
        # # # # # 
        # # # # # 
        # # # # # 
        # # # # # 
        # # # # #
        `</field><next><block type="device_pause" id="=Lxtz|P3*VaM}~i!lUb5"><value name="pause"><shadow type="timePicker" id=":uRMUgyNOxaQ;Dg$_4vB"><field name="ms">30000</field></shadow></value></block></next></block></statement></block><block type="function_definition" id="Odec*ZD6)!IWsG$kk49u" x="1691" y="0"><mutation name="switchOffLEDs" functionid="sEaCG?+5^B_mI#HP6lDE"></mutation><field name="function_name">switchOffLEDs</field><statement name="STACK"><block type="device_clear_display" id="}20{j_=V7J*:b[|%FIRP"></block></statement></block><block type="function_definition" id="QOuec8%2zGiC{5aRt%Rf" x="0" y="557"><mutation name="checkIR" functionid="eNCoB0rWd)xb)b;m(Qx;"></mutation><field name="function_name">checkIR</field><statement name="STACK"><block type="function_return" id="vBR=s=DN-K{G^^nDsyTy"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number" id="7`+TE-z}{Y_jjbiYD8C$"><field name="NUM">0</field></shadow><block type="logic_compare" id="c3U.~tDYK5Tka^0vi#fq"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id="=nz[CGibQmIh/Ek)yVG{"><field name="NUM">0</field></shadow><block type="device_get_digital_pin" id="}qW)kB~Z?.3m0EdI3,F?"><value name="name"><shadow type="digital_pin_shadow" id="(Csl:YcZ8O1:Uj,Kl0%S"><field name="pin">DigitalPin.P0</field></shadow><block type="variables_get" id="v{(^?|5#ac(GIolUw(V5"><field name="VAR" id="TUeO5Co9SI)f`r9e@y|/">IR_PIN</field></block></value></block></value><value name="B"><shadow type="math_number" id="^,`B3!Q4@]-YF#q5IDlC"><field name="NUM">1</field></shadow></value></block></value></block></statement></block><block type="function_definition" id="iX5y!}_d(tLUI04IQcQY" x="685" y="557"><mutation name="isButtonAPressed" functionid="y#Jl7z`.k]a#UOE(gCTF"></mutation><field name="function_name">isButtonAPressed</field><statement name="STACK"><block type="function_return" id="xWxreb~h6h?#{i9xc)Qc"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><comment pinned="false" h="80" w="160">Corrigé : Button.A directement</comment><value name="RETURN_VALUE"><shadow type="math_number" id="tko_HjwNZaysHlVZ.IZ`"><field name="NUM">0</field></shadow><block type="device_get_button2" id="wuQ;Sb0)TB%g6lvkV%oe"><field name="NAME">Button.A</field></block></value></block></statement></block><block type="function_definition" id="PSWQ4k,*?BOs*^9=au7P" x="1148" y="557"><mutation name="checkPIR" functionid="s;X?EgAuMz,23$,qy}Ng"></mutation><field name="function_name">checkPIR</field><statement name="STACK"><block type="function_return" id="`T35@[I+X3A_tdj7+QLR"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number" id="EK!oyde.tZ(7c~5kO{T,"><field name="NUM">0</field></shadow><block type="logic_compare" id=":fKpLdlPy%@(Ka0:V%w}"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id="O96m9O{Bp+AXSs{0nvv`"><field name="NUM">0</field></shadow><block type="device_get_digital_pin" id="PI7t1r8XtQK0Wo:2gbpa"><value name="name"><shadow type="digital_pin_shadow" id="#pf8%MtYpXSb7~PTt*8J"><field name="pin">DigitalPin.P0</field></shadow><block type="variables_get" id="OCDE,uNr0[yYK?r{`RdD"><field name="VAR" id="bC|-H}b`*z?g4Z66pC!;">PIR_PIN</field></block></value></block></value><value name="B"><shadow type="math_number" id="r![XzGmK0G6f3UseLS,@"><field name="NUM">1</field></shadow></value></block></value></block></statement></block><block type="function_definition" id="jF+J4LhF(0jU0u4P.q]3" x="0" y="771"><mutation name="checkLum" functionid="!seU.O:+BTqeT|4LZjJ{"></mutation><field name="function_name">checkLum</field><statement name="STACK"><block type="function_return" id="ITjzwT5syHiP!n.#$II@"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number" id="Y+-:nU}b0SrtOr7~l(up"><field name="NUM">0</field></shadow><block type="logic_compare" id="wb~QviSZ`qLOrcprGAoQ"><field name="OP">LT</field><value name="A"><shadow type="math_number" id="m8ivPJc3qz_TF@unJvuW"><field name="NUM">0</field></shadow><block type="device_get_light_level" id="js}1Lf]|d3*g`P(?L2Hl"></block></value><value name="B"><shadow type="math_number" id="%x4mXk3yHkrWc3#-h~hP"><field name="NUM">0</field></shadow><block type="variables_get" id="R?FkwF)lZ)WsPoxG.K#6"><field name="VAR" id="}/dh6*]fa!Jv`ZWRztX=">LUMINOSITY_THRESHOLD</field></block></value></block></value></block></statement></block></xml>